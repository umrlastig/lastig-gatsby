"use strict";(self.webpackChunklastig_gastby=self.webpackChunklastig_gastby||[]).push([[212],{2585:function(e,t,a){a.r(t),a.d(t,{Head:function(){return p},default:function(){return x}});var n=a(4506),d=a(6540),r=a(4587),l=a(7528),i=a(7065),o=a(6442),m=a(6358),s=a(5190);function c(e){let{options:t}=e;const a=(0,d.useRef)();return(0,d.useEffect)((()=>{if(null==t)return;const e=s.QI(t);return a.current.append(e),()=>e.remove()}),[t]),d.createElement("div",{ref:a})}function x(e){let{data:t,pageContext:a}=e;const l=a.team,x=l.length>1;console.log(`Project PAGE : ${l} => ${x}`);const p=(0,o.A)();const _=["H2020","ERA4CS","Horizon Europe","ENIAC","ANR","TOSCA","AID","iSite","PEPR","FUI","AAP Excellences","TIGA","PEPS","ACTE","GEOVIS","MEIG","STRUDEL"],h=t.allProjectsCsv.nodes.map((e=>{const t=e.Dates.split("-").map((e=>Number(e.trim())));return{long_name:e.Contract_Name,name:e.Short_Name,start_date:t[0],middle_date:(t[1]+t[0])/2,end_date:t[1],theme:e.Theme,duration:t[1]-t[0],funding:e.Funding_Origin,type:e.Contract_Type,teams:e.Teams,site:e.Website}})).filter((e=>{let{theme:t,type:a}=e;return t&&_.includes(a)})),u=Math.min.apply(Math,(0,n.A)(h.map((e=>e.start_date)))),f=Math.max.apply(Math,(0,n.A)(h.map((e=>e.end_date))));h.sort(((e,t)=>e.theme.localeCompare(t.theme)||e.start_date-t.start_date||e.end_date-t.end_date||e.name.localeCompare(t.name)));const A=h.map(((e,t)=>({index:t,...e})));A.forEach((e=>console.log(e.index,e.theme,e.start_date,e.end_date,e.name)));const E=A.flatMap((e=>e.teams.map(((t,a)=>({end_date:e.end_date,team:t,index:e.index,dx:10*-(a+1)}))))),g=(0,n.A)(new Set(E.map((e=>e.dx))));E.forEach((e=>console.log(e.index,e.index,e.dx))),g.forEach((e=>console.log(e)));const y=(0,n.A)(new Set(A.map((e=>e.theme)))).map((e=>{const t=A.filter((t=>{let{theme:a}=t;return a===e})),a=Math.min.apply(Math,(0,n.A)(t.map((e=>e.index)))),d=Math.max.apply(Math,(0,n.A)(t.map((e=>e.index))));return{theme:e,start_date:u,end_date:f,index_1:a,index_2:d,index_middle:Math.round((a+d)/2)}}));return y.forEach((e=>console.log(e.theme,e.start_date,e.end_date,e.index_1,e.index_2,e.index_middle))),d.createElement(r.A,{pageTitle:`${x?"LASTIG":l} Projects`},d.createElement("h3",null,(C=`${x?"LASTIG":l} Projects`,p.formatMessage({id:C}))),!x&&d.createElement(m.j,{title:l,menus:t.site.siteMetadata.menus[l],team:l}),d.createElement("div",null,d.createElement(c,{options:{width:1200,x:{tickFormat:"d",axis:"both"},color:{domain:_,range:_.map((e=>i.w.colors[e]))},marks:[s.Pc(y,{x1:"start_date",x2:"end_date",y1:"index_1",y2:"index_2",rx:5,title:"theme",fill:"#fcf9f9ff"}),s.Pc(A,{x1:"start_date",x2:"end_date",y:"index",rx:5,fill:"type",tip:!0,href:e=>e.site}),s.Qq(A,{x:"middle_date",y:"index",text:e=>e.name,lineAnchor:"middle",fontWeight:"bold"}),g.map((e=>s.Om(E.filter((t=>{let{dx:a}=t;return a===e})),{x:e=>e.end_date,y:"index",dx:e,dy:-10,fill:"team"}))),s.Qq(y,{x:"start_date",y:"index_middle",text:e=>e.theme,lineAnchor:"middle",rotate:-90,dx:10,fontWeight:"bold"}),s.l3({tickSize:0,label:null,tickFormat:null})]}})));var C}const p=e=>{let{pageContext:t}=e;return d.createElement(l.A,{title:`${t.team.length>1?"LASTIG":t.team} Projects`})}}}]);
//# sourceMappingURL=component---src-templates-projects-js-207bb2b483cbfd091dfd.js.map